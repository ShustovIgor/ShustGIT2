--
-- Script was generated by Devart dbForge Studio 2020 for MySQL, Version 9.0.689.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 07.12.2021 14:16:30
-- Server version: 8.0.27
-- Client version: 4.1
--

-- 
-- Disable foreign keys
-- 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

-- 
-- Set SQL mode
-- 
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

-- 
-- Set character set the client will use to send SQL statements to the server
--
SET NAMES 'utf8';

--
-- Set default database
--
USE biblio;

--
-- Drop table `knig_fond`
--
DROP TABLE IF EXISTS knig_fond;

--
-- Drop table `chitatel`
--
DROP TABLE IF EXISTS chitatel;

--
-- Drop table `inventori_kode`
--
DROP TABLE IF EXISTS inventori_kode;

--
-- Drop table `status`
--
DROP TABLE IF EXISTS status;

--
-- Drop table `book`
--
DROP TABLE IF EXISTS book;

--
-- Drop table `author`
--
DROP TABLE IF EXISTS author;

--
-- Drop table `izdatelstvo`
--
DROP TABLE IF EXISTS izdatelstvo;

--
-- Drop table `janre`
--
DROP TABLE IF EXISTS janre;

--
-- Set default database
--
USE biblio;

--
-- Create table `janre`
--
CREATE TABLE janre (
  id_Janre int NOT NULL AUTO_INCREMENT,
  Janre tinytext DEFAULT NULL,
  PRIMARY KEY (id_Janre)
)
ENGINE = INNODB,
AUTO_INCREMENT = 6,
AVG_ROW_LENGTH = 3276,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create table `izdatelstvo`
--
CREATE TABLE izdatelstvo (
  id_izdatelstva int NOT NULL AUTO_INCREMENT,
  nazvanie tinytext DEFAULT NULL,
  PRIMARY KEY (id_izdatelstva)
)
ENGINE = INNODB,
AUTO_INCREMENT = 4,
AVG_ROW_LENGTH = 5461,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create table `author`
--
CREATE TABLE author (
  id_Author int NOT NULL AUTO_INCREMENT,
  FIO tinytext DEFAULT NULL,
  PRIMARY KEY (id_Author)
)
ENGINE = INNODB,
AUTO_INCREMENT = 5,
AVG_ROW_LENGTH = 4096,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create table `book`
--
CREATE TABLE book (
  id_Book int NOT NULL AUTO_INCREMENT,
  NameBook tinytext DEFAULT NULL,
  id_Author int DEFAULT NULL,
  id_Janre int DEFAULT NULL,
  id_Izdatelstvo int DEFAULT NULL,
  Cena tinytext DEFAULT NULL,
  God_izdania year DEFAULT NULL,
  Kol_vo_str int DEFAULT NULL,
  PRIMARY KEY (id_Book)
)
ENGINE = INNODB,
AUTO_INCREMENT = 7,
AVG_ROW_LENGTH = 3276,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create foreign key
--
ALTER TABLE book
ADD CONSTRAINT FK_book_author_id_Author FOREIGN KEY (id_Author)
REFERENCES author (id_Author);

--
-- Create foreign key
--
ALTER TABLE book
ADD CONSTRAINT FK_book_izdatelstvo_id_izdatelstva FOREIGN KEY (id_Izdatelstvo)
REFERENCES izdatelstvo (id_izdatelstva);

--
-- Create foreign key
--
ALTER TABLE book
ADD CONSTRAINT FK_book_janre_id_Janre FOREIGN KEY (id_Janre)
REFERENCES janre (id_Janre);

--
-- Create table `status`
--
CREATE TABLE status (
  id_status int NOT NULL AUTO_INCREMENT,
  Statuss tinytext DEFAULT NULL,
  PRIMARY KEY (id_status)
)
ENGINE = INNODB,
AUTO_INCREMENT = 3,
AVG_ROW_LENGTH = 8192,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create table `inventori_kode`
--
CREATE TABLE inventori_kode (
  id_kode int NOT NULL AUTO_INCREMENT,
  Inventory_kode char(20) DEFAULT NULL,
  PRIMARY KEY (id_kode)
)
ENGINE = INNODB,
AUTO_INCREMENT = 31,
AVG_ROW_LENGTH = 564,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create table `chitatel`
--
CREATE TABLE chitatel (
  id int NOT NULL AUTO_INCREMENT,
  FIO tinytext DEFAULT NULL,
  Adress tinytext DEFAULT NULL,
  Rab_telefon tinytext DEFAULT NULL,
  Domash_tel tinytext DEFAULT NULL,
  Nomer_bileta int NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 7,
AVG_ROW_LENGTH = 16384,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create table `knig_fond`
--
CREATE TABLE knig_fond (
  id_book int DEFAULT NULL,
  inventary_kod int DEFAULT NULL,
  Status int DEFAULT NULL,
  id_chitatel int DEFAULT NULL,
  data_vidachi tinytext DEFAULT NULL,
  data_vozvrata tinytext DEFAULT NULL
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 16384,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create foreign key
--
ALTER TABLE knig_fond
ADD CONSTRAINT FK_knig_fond_book_id_Book FOREIGN KEY (id_book)
REFERENCES book (id_Book);

--
-- Create foreign key
--
ALTER TABLE knig_fond
ADD CONSTRAINT FK_knig_fond_chitatel_id FOREIGN KEY (id_chitatel)
REFERENCES chitatel (id);

--
-- Create foreign key
--
ALTER TABLE knig_fond
ADD CONSTRAINT FK_knig_fond_inventori_kode_id_kode FOREIGN KEY (inventary_kod)
REFERENCES inventori_kode (id_kode);

--
-- Create foreign key
--
ALTER TABLE knig_fond
ADD CONSTRAINT FK_knig_fond_status_id_status FOREIGN KEY (Status)
REFERENCES status (id_status);

-- 
-- Dumping data for table janre
--
INSERT INTO janre VALUES
(1, 'Ужасы'),
(2, 'Фантастика'),
(3, 'Фентези'),
(4, 'Сатира'),
(5, 'Роман');

-- 
-- Dumping data for table izdatelstvo
--
INSERT INTO izdatelstvo VALUES
(1, 'Эксмо'),
(2, 'АСТ'),
(3, 'Азбука_классика');

-- 
-- Dumping data for table author
--
INSERT INTO author VALUES
(1, 'Михаил Афанасьевич Булгаков'),
(2, 'Анджей Сапковский'),
(3, 'Николай Васильевич Гоголь'),
(4, 'Говард Филипс Лавкрафт');

-- 
-- Dumping data for table status
--
INSERT INTO status VALUES
(1, 'Взято'),
(2, 'Свободно');

-- 
-- Dumping data for table inventori_kode
--
INSERT INTO inventori_kode VALUES
(1, 'А'),
(2, 'Б'),
(3, 'В'),
(4, 'Г'),
(5, 'Д'),
(6, 'Е'),
(7, 'Ё'),
(8, 'Ж'),
(9, 'З'),
(10, 'И'),
(11, 'Й'),
(12, 'К'),
(13, 'Л'),
(14, 'М'),
(15, 'Н'),
(16, 'П'),
(17, 'О'),
(18, 'Р'),
(19, 'С'),
(20, 'Т'),
(21, 'У'),
(22, 'Ф'),
(23, 'Х'),
(24, 'Ц'),
(25, 'Ч'),
(26, 'Ш'),
(27, 'Щ'),
(28, 'Э'),
(29, 'Ю'),
(30, 'Я');

-- 
-- Dumping data for table chitatel
--
INSERT INTO chitatel VALUES
(1, 'нет', 'нет', '0', '0', 1),
(2, 'Бузмаков Кирилл Александрович', 'г. Арапаха ул.Чингачук дом 10', '89195678901', '88002189908', 2),
(3, 'Смагин Владимир Иванович', 'г. Токио ул. Резанская дом 1', '89229114022', '88005553535', 3),
(4, 'Родыгин Сергей Викторович', 'г. Мондштат ул. Имени Моны дом 1', '89095676879', '88003456789', 4),
(5, 'Кузьмина Руслана Анатольевна', 'г. Неизвестев ул. Непонятино дом 8', '89223456185', '88004632683', 5),
(6, 'Мишин Корнелий Геласьевич', 'г. Тамов ул. Здесево дом 1', '89092354655', '88006428645', 6);

-- 
-- Dumping data for table book
--
INSERT INTO book VALUES
(1, 'Монстры Лавкрафта', 4, 1, 1, '249 руб.', 2016, 496),
(2, 'Ревизор', 3, 4, 1, '318 руб.', 2021, 352),
(3, 'Ведьмак"Последнее желание. Меч предназначения"', 2, 3, 2, '919 руб.', 2020, 320),
(4, 'Зов Ктулху', 4, 1, 1, '177 руб.', 2019, 352),
(5, 'Мастер и Маргаритта', 1, 5, 3, '191 руб.', 2020, 416);

-- 
-- Dumping data for table knig_fond
--
INSERT INTO knig_fond VALUES
(1, 14, 1, 2, '07.12.2021', '10.01.2022'),
(2, 18, 2, 1, '07.12.2021', '10.01.2022'),
(3, 3, 1, 3, '07.12.2021', '20.01.2022'),
(4, 9, 1, 4, '07.12.2021', '10.01.2022'),
(5, 14, 1, 5, '07.12.2021', '10.01.2022');

-- 
-- Restore previous SQL mode
-- 
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

-- 
-- Enable foreign keys
-- 
/*!40014 SET FOREIGN_KEY_CHECKS = @OLD_FOREIGN_KEY_CHECKS */;